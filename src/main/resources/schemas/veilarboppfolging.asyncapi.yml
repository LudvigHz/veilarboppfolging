asyncapi: 3.0.0
info:
  title: Veilarboppfolging - Oppfølgingperioder
  version: 0.0.1
  description: |
    Endringer i oppfølgingsperioder (start eller slutt)
  contact:
    name: Team Dab
    url: 'https://nav-it.slack.com/archives/C04HS60F283'
defaultContentType: application/json
channels:
  pto.oppfolgingsperiode-v1:
    address: pto.oppfolgingsperiode-v1
    messages:
      oppfolgingsperideStartEllerSlutt:
        $ref: '#/components/messages/oppfolgingsperiode'
        bindings:
          kafka:
            key: string
            format: aktorId
            description: Aktør-id
    description: Start eller slutt på oppfølgingsperioder

operations:
  pto.oppfolgingsperiode-v1.subscribe:
    action: send
    channel:
      $ref: '#/channels/pto.oppfolgingsperiode-v1'
    messages:
      - $ref: '#/channels/pto.oppfolgingsperiode-v1/messages/oppfolgingsperideStartEllerSlutt'
components:
  messages:
    oppfolgingsperiode:
      name: oppfolgingsperiode
      title: Oppfølgingsperiode
      summary: Oppdatert oppfølgingsperiode etter enten start eller slutt
      payload:
        $ref: oppfolgingsperiode.v1.schema.yml
